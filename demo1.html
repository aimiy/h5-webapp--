<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>默写</title>
</head>
<body>
	<h4></h4>
	<div class="content">

	</div>

    <script src="lib/zepto.min.js"></script>
    <script>
    	window.jQuery = $;
    </script>
    <script src="js/jQuery.base64.js"></script>
    <script src="js/jQuery.jsonp.js"></script>
    <script>
    (function(){
        var Util = (function(){
            var getBSONP = function(){
                if (data.result ==0) {
                    var url = data.jsonp;
                    return $.jsonp({
                        url :url,
                        cache:true,
                        callback:'duokan_fiction_chapter',
                        success:function(result){
                            var data = $.base64.decode(result);
                            var json = decodeURIComponent(escape(data));
                            // console.log(json);
                            // var jsonObj = JSON.parse(json);
                            // var title = jsonObj.t;
                            // var content = jsonObj.p[0];
                            // console.log(content);
                            // Dom.titleh4.html(title);
                            // Dom.contentdiv.html(content);
                            callback &&callback(json);
                        }
                    })
                }

            }
        })();

    	var Dom = {
    		titleh4:$('h4'),
    		contentdiv:$('.content')
    	}
    	var main = function(){
    		ReaderModel();
            
    	}


        //todo获取文章综合
        function ReaderModel(){

        //todo 定义获得章节
        var getFictionInfo = function(callback){
            $.get("data/chapter.json",function(data){
                Chapter_id = data.chapters[1].chapter_id;
                callback && callback(data);
            })
        }
        //todo 定义获得文章
        var getCurChapterContent = function(chapter_id,callback){
            $.get("data/data"+chapter_id+".json",function(data){
                
            })
        }
        //使用总
        var Chapter_id; 
                var init = function(){
                    getFictionInfo(function(){
                        getCurChapterContent(Chapter_id,function(data){

                            console.log(data);
                        });
                    })
                }
                init();
        //todo 渲染显示


        }
		main();
    })();
    </script>

</body>
</html>